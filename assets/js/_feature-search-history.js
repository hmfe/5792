"use strict";define(["utilities","storage"],function(e,t){var r="search-history",a={wrapper:".search__history",list:"search__history-list",deleteAll:".search__history-delete--all",deleteItem:"search__history-delete--item"};return{createSearchHistoryFeed:function(){this.showSearchHistory();this.bindDeleteHistoryEvent()},saveHistoryToStorage:function(a){var s=t.getLocalStorage(r),i=s?JSON.parse(s):[],o={title:a,date:e.getFormattedDate()};i.unshift(o);t.addItemToStorage(r,JSON.stringify(i))},addNewSearchToHistoryList:function(t){var r=document.querySelector("."+a.list);if(r.length<1){this.showSearchHistory();return!0}var s={title:t,date:e.getFormattedDate()},i=this.formatHistoryItem(s);r.insertAdjacentHTML("afterbegin",i);this.toggleSearchResultDisplay()},showSearchHistory:function(){for(var e=t.getLocalStorage(r),s=e?JSON.parse(e):[],i="",o=document.createElement("ul"),l=0;l<s.length;l++)i+=this.formatHistoryItem(s[l]);o.insertAdjacentHTML("beforeend",i);o.classList.add(a.list);document.querySelector(a.wrapper).appendChild(o);this.toggleSearchResultDisplay()},bindDeleteHistoryEvent:function(){document.querySelector(a.deleteAll).onclick=function(){this.deleteSearchHistory()}.bind(this);document.addEventListener("click",function(e){e.target.classList.contains(a.deleteItem)&&this.deleteSearchHistoryItem(e)}.bind(this),!1)},deleteSearchHistoryItem:function(e){var a=e.target,s=t.getLocalStorage(r),i=s?JSON.parse(s):[],o=[];a.parentElement.remove();for(var l=0;l<i.length;l++)i[l].title!==a.dataset.title&&o.push(i[l]);t.addItemToStorage(r,JSON.stringify(o));this.toggleSearchResultDisplay()},deleteSearchHistory:function(){t.deleteLocalStorage(r);this.removeSearchResults();this.toggleSearchResultDisplay()},removeSearchResults:function(){var e=document.querySelectorAll("."+a.list);e&&e.length>0&&e[0].remove()},formatHistoryItem:function(e){return e?'<li>\n                            <span class="item">'.concat(e.title,'</span>\n                            <span class="date">').concat(e.date,'</span>\n                            <a class="').concat(a.deleteItem,'" href="javascript:void(0)" data-title="').concat(e.title,'"></a>\n                            </li>\n                        '):""},toggleSearchResultDisplay:function(){var e=t.getLocalStorage(r),s=document.querySelector(a.wrapper);e&&e.length>0?s.style.display="block":s.style.display="none"}}});